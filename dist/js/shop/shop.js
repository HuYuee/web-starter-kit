define(["jquery","util","template"],function(t,e,a){t("body").css("visibility","visible");var i={init:function(){var e=this;e.initNavTab(),e.getHotProduct(),t("#cloudApp").navTab(),this.tabNav()},tabNav:function(){for(var e=location.hash,a=t("#cloudApp").find("a"),i=0,n=a.length;i<n;++i)if(t(a[i]).attr("href")==e)return void t(a[i]).trigger("click")},initNavTab:function(){t.fn.navTab=function(){return t(this).on("click",function(e){var a=null,i=null;if("LI"===e.target.nodeName)a=e.target;else{if("A"!==e.target.nodeName)return;a=t(e.target).parent()}t(a).hasClass("active")||(i=t(a).find("a").attr("href"),1==t(i).length&&(t(a).parent().find(".active").removeClass("active"),t(a).addClass("active"),t(i).parent().find(".active").removeClass("active"),t(i).addClass("active"),e.preventDefault()))}),this}},getHotProduct:function(){if(e.isDev){var i=e.getRequset();i.id;e.isvId=i.id}else{var n=e.getRestful();n[0];e.isvId=n[0]}t.ajax({type:"get",url:"/market/product/shops/"+e.isvId+"/hotsaleproducts",dataType:"JSON",success:function(e){e.status&&e.data.length>0?a("telHotProduct",e):t(".telHotProduct").css("padding",0)}})},getCompanyInfo:function(e){var i="/market/product/isvInfoAndProducts?isvId="+e;t.ajax({type:"get",url:i,dataType:"JSON",success:function(e){if(e.status){var i=e.data.isvInfo;t(".product-content-name").text(i.isvName),t(".product-content-detail").text(i.isvBrief),t(".product-img").find("img").attr("src",i.isvLogo),t(".product-img img").on("error",function(){t(this).attr("src","../images/index/noimage.jpg")});var n=a("shopAllApp",e.data);document.getElementById("allproducts").innerHTML=n,t(".product-ul img").on("error",function(e){t(this).attr("src","../images/index/noimage.jpg")})}}})}};t(function(){i.init()})});