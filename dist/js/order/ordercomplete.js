define(["jquery","util","template"],function(e,t,r){e("body").css("visibility","visible");var o=function(){var t=e("#agreementNum").val(),r="/market/yonyoucloud/getorderstatus?agreementNum="+t;e.ajax({type:"GET",contentType:"application/json",url:r,cache:!1,dataType:"json",success:function(t){if(1==t.status){var r=t.data;e("#order-complete-price").html(r.busiAmount),e("#order-complete-num").html(r.agreementNum);r.agreementNum;e(".order-detail-in").attr("href","/market/index#/shopping/order/order/"+r.agreementNum),1==r.openMode&&e(".order-complete-tips").html('<span>您购买的应用已经申请自动开通，稍后请在<br /><a href="/market/index#/shopping/orderlist/orderlist">我已经购买的应用</a>查看开通详情</span>'),3==r.openMode&&e(".order-complete-tips").html("<span>您购买的应用需要人工服务，请联系服务商提供服务，<br/>并在接受服务后，进入订单详情中确认服务。</span>"),1==r.orderStatus&&(e(".order-complete-text").find("span").html("支付成功"),e(".order-complete-text").find(".loading").hide()),2==r.orderStatus&&(e(".order-complete-text").find("span").html("支付中,正在查询支付状态"),e(".order-complete-text").find(".loading").show(),a())}else alert(t.msg)}})},n=0,a=function(){n<12?(n+=1,setTimeout(o,5e3)):(e(".order-complete-text").find("span").html("未查询到支付结果，请到订单详情页面查看详细信息!"),e(".order-complete-text").find(".loading").hide())};e(function(){o()})});